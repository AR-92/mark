# mark Tutorial: From Beginner to Ninja\n\nWelcome to the comprehensive tutorial for `mark`, the AI prompt templating tool. This tutorial will take you from a complete beginner to a prompt templating ninja!\n\n## Table of Contents\n\n1. [Beginner Level](#beginner-level)\n   - [What is mark?](#what-is-mark)\n   - [Installation](#installation)\n   - [Basic Template Creation](#basic-template-creation)\n   - [Simple Variable Substitution](#simple-variable-substitution)\n   - [Your First Prompt Generation](#your-first-prompt-generation)\n\n2. [Intermediate Level](#intermediate-level)\n   - [Conditional Blocks](#conditional-blocks)\n   - [Loop Blocks](#loop-blocks)\n   - [File Inclusion](#file-inclusion)\n   - [Working with Arrays](#working-with-arrays)\n\n3. [Advanced Level](#advanced-level)\n   - [Complex Template Structures](#complex-template-structures)\n   - [Dynamic Context Injection](#dynamic-context-injection)\n   - [Template Composition](#template-composition)\n   - [Performance Optimization](#performance-optimization)\n\n4. [Ninja Level](#ninja-level)\n   - [AI Agent Integration](#ai-agent-integration)\n   - [Dynamic Prompt Construction](#dynamic-prompt-construction)\n   - [Cross-Domain Knowledge Synthesis](#cross-domain-knowledge-synthesis)\n   - [Self-Optimizing Prompts](#self-optimizing-prompts)\n\n---\n\n## Beginner Level\n\n### What is mark?\n\n`mark` is a powerful Bash-based tool for generating AI/MCP-ready prompts from templates. It allows you to create dynamic, reusable prompt templates with support for:\n\n- Placeholders for variable substitution\n- File inclusion for modular templates\n- Conditional blocks for context-aware prompts\n- Loop blocks for handling lists and arrays\n\n### Installation\n\nTo get started with `mark`, follow these simple steps:\n\n```bash\n# Clone the repository\ngit clone https://github.com/AR-92/mark.git\ncd mark\n\n# Make the script executable\nchmod +x mark\n\n# Run the installation script\n./install.sh\n```\n\nOr for manual installation:\n\n```bash\n# Clone the repository\ngit clone https://github.com/AR-92/mark.git\ncd mark\n\n# Make the script executable\nchmod +x mark\n\n# Optionally, copy to a directory in your PATH\nsudo cp mark /usr/local/bin/\n```\n\n### Basic Template Creation\n\nLet's start by creating a simple template. Create a file called `simple_template.md`:\n\n```markdown\n# {{task_type}} Assistant\n\nYou are a {{role}} who needs to {{task_description}}.\n\nPlease provide a detailed solution.\n```\n\nThis template uses basic placeholders (enclosed in double curly braces `{{}}`) that will be replaced with actual values when generating the prompt.\n\n### Simple Variable Substitution\n\nNow let's create a data file that provides values for our placeholders. Create `simple_data.md`:\n\n```markdown\ntask_type=Code Review\nrole=Software Engineer\ntask_description=review this Python code for best practices and potential bugs\n```\n\nIn `mark`, data files use a simple `key=value` format. Each line defines a variable that can be used in templates.\n\n### Your First Prompt Generation\n\nNow let's generate our first prompt:\n\n```bash\n./mark generate simple_template.md simple_data.md\n```\n\nThis will output:\n\n```markdown\n# Code Review Assistant\n\nYou are a Software Engineer who needs to review this Python code for best practices and potential bugs.\n\nPlease provide a detailed solution.\n```\n\nCongratulations! You've just created your first dynamic prompt with `mark`.\n\n---\n\n## Intermediate Level\n\n### Conditional Blocks\n\nConditional blocks allow you to include or exclude content based on variable values. Let's create a more sophisticated template in `conditional_template.md`:\n\n```markdown\n# {{task_type}} Assistant\n\n{{#if expert_mode}}\nYou are an expert {{role}} with advanced knowledge.\n{{else}}\nYou are a {{role}} who is learning.\n{{/if}}\n\nTask: {{task_description}}\n\n{{#if has_examples}}\nHere's an example to guide you:\n{{example_content}}\n{{/if}}\n\nPlease provide a detailed solution.\n```\n\nCreate corresponding data in `conditional_data.md`:\n\n```markdown\ntask_type=Code Optimization\nrole=Python Developer\nexpert_mode=true\ntask_description=optimize this function for better performance\nhas_examples=true\nexample_content=def fibonacci(n): return n if n <= 1 else fibonacci(n-1) + fibonacci(n-2)\n```\n\nGenerate the prompt:\n\n```bash\n./mark generate conditional_template.md conditional_data.md\n```\n\nOutput:\n\n```markdown\n# Code Optimization Assistant\n\nYou are an expert Python Developer with advanced knowledge.\n\nTask: optimize this function for better performance\n\nHere's an example to guide you:\ndef fibonacci(n): return n if n <= 1 else fibonacci(n-1) + fibonacci(n-2)\n\nPlease provide a detailed solution.\n```\n\nNotice how the conditional block with `expert_mode=true` included the expert text and the `has_examples=true` condition included the example content.\n\n### Loop Blocks\n\nLoop blocks allow you to iterate over lists of items. Create `loop_template.md`:\n\n```markdown\n# {{task_type}} Requirements\n\nRole: {{role}}\n\nTask: {{task_description}}\n\nRequirements:\n{{#each requirements}}\n- {{this}}\n{{/each}}\n\nConstraints:\n{{#each constraints}}\n- {{this}}\n{{/each}}\n\nPlease address all requirements and constraints in your solution.\n```\n\nCreate data file `loop_data.md` using indexed arrays:\n\n```markdown\ntask_type=API Development\nrole=Backend Developer\ntask_description=create a REST API for a todo application\nrequirements_0=Implement CRUD operations for todos\nrequirements_1=Use JWT for authentication\nrequirements_2=Include input validation\nconstraints_0=Must be implemented in Node.js\nconstraints_1=Database should be MongoDB\n```\n\nIn `mark`, arrays are defined using the pattern `array_name_index=value`. Generate the prompt:\n\n```bash\n./mark generate loop_template.md loop_data.md\n```\n\nOutput:\n\n```markdown\n# API Development Requirements\n\nRole: Backend Developer\n\nTask: create a REST API for a todo application\n\nRequirements:\n- Implement CRUD operations for todos\n- Use JWT for authentication\n- Include input validation\n\nConstraints:\n- Must be implemented in Node.js\n- Database should be MongoDB\n\nPlease address all requirements and constraints in your solution.\n```\n\n### File Inclusion\n\nFile inclusion allows you to modularize your templates by including content from other files. Create `header.md`:\n\n```markdown\n# {{project_name}} - {{task_type}}\n\nThis is a {{complexity_level}} task for the {{project_name}} project.\n```\n\nCreate `body.md`:\n\n```markdown\n## Task Description\n\n{{task_description}}\n\n## Requirements\n\n{{#each requirements}}\n- {{this}}\n{{/each}}\n```\n\nNow create a main template `modular_template.md` that includes these files:\n\n```markdown\n{{@header.md}}\n\n{{@body.md}}\n\n## Constraints\n\n{{#each constraints}}\n- {{this}}\n{{/each}}\n\nPlease complete this task following all requirements and constraints.\n```\n\nCreate data file `modular_data.md`:\n\n```markdown\nproject_name=Todo API\ntask_type=Backend Implementation\ncomplexity_level=Intermediate\ntask_description=Implement a complete REST API for a todo application with user authentication\nrequirements_0=CRUD operations for todos\nrequirements_1=JWT-based authentication\nrequirements_2=Input validation and error handling\nconstraints_0=Use Node.js and Express\nconstraints_1=Use MongoDB for data storage\n```\n\nGenerate the prompt:\n\n```bash\n./mark generate modular_template.md modular_data.md\n```\n\nThis will include the content from `header.md` and `body.md`, replacing their placeholders with values from `modular_data.md`.\n\n### Working with Arrays\n\nArrays in `mark` are handled through indexed variables. Let's look at a more complex example in `array_template.md`:\n\n```markdown\n# {{task_type}} Implementation Guide\n\nRole: {{role}}\n\n## Overview\n\n{{overview}}\n\n## Steps to Complete\n\n{{#each steps}}\n{{@index}}. {{this}}\n{{/each}}\n\n## Prerequisites\n\n{{#each prerequisites}}\n- {{this}}\n{{/each}}\n\n## Expected Deliverables\n\n{{#each deliverables}}\n- {{this}}\n{{/each}}\n```\n\nCreate data file `array_data.md`:\n\n```markdown\ntask_type=Web Scraper Development\nrole=Python Developer\noverview=Create a web scraper that extracts product information from e-commerce websites\nsteps_0=Set up the project structure\nsteps_1=Install required dependencies (requests, beautifulsoup4)\nsteps_2=Implement the scraping logic\nsteps_3=Add error handling and retries\nsteps_4=Implement data storage\nprerequisites_0=Python 3.8+\nprerequisites_1=Basic understanding of HTML\nprerequisites_2=Familiarity with CSS selectors\ndeliverables_0=Working scraper script\ndeliverables_1=Documentation on usage\ndeliverables_2=Sample output data\n```\n\nGenerate the prompt:\n\n```bash\n./mark generate array_template.md array_data.md\n```\n\nOutput:\n\n```markdown\n# Web Scraper Development Implementation Guide\n\nRole: Python Developer\n\n## Overview\n\nCreate a web scraper that extracts product information from e-commerce websites\n\n## Steps to Complete\n\n0. Set up the project structure\n1. Install required dependencies (requests, beautifulsoup4)\n2. Implement the scraping logic\n3. Add error handling and retries\n4. Implement data storage\n\n## Prerequisites\n\n- Python 3.8+\n- Basic understanding of HTML\n- Familiarity with CSS selectors\n\n## Expected Deliverables\n\n- Working scraper script\n- Documentation on usage\n- Sample output data\n```\n\nNotice how `{{@index}}` provides the current index in the loop.\n\n---\n\n## Advanced Level\n\n### Complex Template Structures\n\nLet's create a complex template that combines all the features we've learned. Create `complex_template.md`:\n\n```markdown\n{{@header.md}}\n\n## Project Context\n\n{{#if is_enterprise}}\nThis is an enterprise-grade project with strict security requirements.\n{{else}}\nThis is a standard project with typical requirements.\n{{/if}}\n\n{{#if has_dependencies}}\n## Dependencies\n\nThis project requires the following dependencies:\n{{#each dependencies}}\n- {{this}}\n{{/each}}\n{{/if}}\n\n## Task Description\n\n{{task_description}}\n\n## Implementation Requirements\n\n{{#each requirements}}\n### {{@index}}. {{this.title}}\n\n{{this.description}}\n\n{{#if this.has_code_example}}\nExample:\n```{{this.example_language}}\n{{this.code_example}}\n```\n{{/if}}\n\n{{/each}}\n\n## Constraints and Limitations\n\n{{#each constraints}}\n- {{this}}\n{{/each}}\n\n## Success Criteria\n\n{{#each success_criteria}}\n- {{this}}\n{{/each}}\n\nPlease provide a complete implementation that addresses all requirements.\n```\n\nCreate data file `complex_data.md`:\n\n```markdown\nproject_name=Financial Data Analysis System\ntask_type=Data Processing Pipeline\nis_enterprise=true\nhas_dependencies=true\ndependencies_0=Python 3.9+\ndependencies_1=Pandas\ndependencies_2=NumPy\ndependencies_3=Apache Kafka\ntask_description=Create a data processing pipeline that ingests financial data from multiple sources, processes it, and stores it in a data warehouse\nrequirements_0.title=Data Ingestion\nrequirements_0.description=Implement connectors for various data sources including CSV files, JSON APIs, and database exports\nrequirements_0.has_code_example=true\nrequirements_0.example_language=python\nrequirements_0.code_example=import pandas as pd\\ndf = pd.read_csv('data.csv')\nrequirements_1.title=Data Transformation\nrequirements_1.description=Clean and transform the data according to business rules, including handling missing values and data type conversions\nrequirements_1.has_code_example=true\nrequirements_1.example_language=python\nrequirements_1.code_example=df['column'] = df['column'].fillna(0)\nrequirements_2.title=Data Validation\nrequirements_2.description=Implement validation rules to ensure data quality and consistency\nrequirements_2.has_code_example=false\nconstraints_0=All data must be encrypted at rest\nconstraints_1=Processing must complete within 10 minutes\nconstraints_2=System must handle at least 10,000 records per minute\nsuccess_criteria_0=Pipeline processes data from all sources correctly\nsuccess_criteria_1=Data quality metrics meet defined thresholds\nsuccess_criteria_2=Performance benchmarks are achieved\n```\n\nAlso update `header.md` to work with this template:\n\n```markdown\n# {{project_name}} - {{task_type}}\n\n{{#if is_enterprise}}\n**ENTERPRISE PROJECT**\n{{/if}}\n```\n\nGenerate the prompt:\n\n```bash\n./mark generate complex_template.md complex_data.md\n```\n\nThis will produce a comprehensive, multi-section prompt that demonstrates all of `mark`'s features.\n\n### Dynamic Context Injection\n\nAI agents can dynamically inject context into templates. Let's see how this works with environment variables.\n\nCreate `dynamic_template.md`:\n\n```markdown\n# {{task_domain}} Assistant\n\nCurrent time: {{current_time}}\nUser mood: {{user_mood}}\nTask priority: {{task_priority}}\n\n{{#if is_urgent}}\n**URGENT TASK**\n{{/if}}\n\nTask: {{task_description}}\n\n{{#if user_is_expert}}\nAs an expert in this domain, please provide an advanced solution.\n{{else}}\nPlease provide a solution that is easy to understand and implement.\n{{/if}}\n\n{{#each context_info}}\n- {{this}}\n{{/each}}\n```\n\nYou can inject dynamic context through environment variables:\n\n```bash\nexport current_time=$(date)\nexport user_mood=\"focused\"\nexport task_priority=\"high\"\nexport is_urgent=true\nexport user_is_expert=true\n\n./mark generate dynamic_template.md\n```\n\nCreate data file `dynamic_data.md`:\n\n```markdown\ntask_domain=System Administration\ntask_description=Debug a production server that is experiencing high CPU usage\ncontext_info_0=Server is running Ubuntu 20.04\ncontext_info_1=Application is a Node.js web server\ncontext_info_2=Issue started 2 hours ago\n```\n\nGenerate the prompt:\n\n```bash\n./mark generate dynamic_template.md dynamic_data.md\n```\n\n### Template Composition\n\nBuild complex prompts by combining multiple templates. Create `composition_template.md`:\n\n```markdown\n{{@introduction_template.md}}\n\n{{@requirements_template.md}}\n\n{{@constraints_template.md}}\n\n{{@instructions_template.md}}\n```\n\nCreate `introduction_template.md`:\n\n```markdown\n# {{project_name}} - {{task_type}}\n\n{{#if project_status}}\nStatus: {{project_status}}\n{{/if}}\n\n{{introduction_text}}\n```\n\nCreate `requirements_template.md`:\n\n```markdown\n## Requirements\n\n{{#each requirements}}\n- {{this}}\n{{/each}}\n\n{{#if has_technical_requirements}}\n### Technical Requirements\n\n{{#each technical_requirements}}\n- {{this}}\n{{/each}}\n{{/if}}\n```\n\nCreate `constraints_template.md`:\n\n```markdown\n## Constraints\n\n{{#each constraints}}\n- {{this}}\n{{/each}}\n```\n\nCreate `instructions_template.md`:\n\n```markdown\n## Instructions\n\n{{#each instructions}}\n{{@index}}. {{this}}\n{{/each}}\n\n{{#if deliverables}}\n## Deliverables\n\n{{#each deliverables}}\n- {{this}}\n{{/each}}\n{{/if}}\n```\n\nCreate data file `composition_data.md`:\n\n```markdown\nproject_name=Customer Analytics Dashboard\ntask_type=Data Visualization\nproject_status=In Development\nintroduction_text=Create an interactive dashboard to visualize customer behavior data\nrequirements_0=Display customer demographics\nrequirements_1=Show purchase history trends\nrequirements_2=Include real-time metrics\nhas_technical_requirements=true\ntechnical_requirements_0=Use React for frontend\ntechnical_requirements_1=Use D3.js for visualizations\ntechnical_requirements_2=Backend API in Python Flask\nconstraints_0=Must load within 3 seconds\nconstraints_1=Support 1000 concurrent users\ninstructions_0=Set up the development environment\ninstructions_1=Create the data models\ninstructions_2=Implement the API endpoints\ninstructions_3=Build the frontend components\ninstructions_4=Integrate frontend with backend\ndeliverables_0=Working dashboard application\ndeliverables_1=API documentation\ndeliverables_2=User guide\n```\n\nGenerate the prompt:\n\n```bash\n./mark generate composition_template.md composition_data.md\n```\n\n### Performance Optimization\n\nFor AI agents processing large volumes of prompts, here are some optimization tips:\n\n1. Use indexed arrays for efficient loop processing\n2. Structure data files for minimal variable lookups\n3. Cache compiled templates for repeated use\n\nCreate an optimized template `optimized_template.md`:\n\n```markdown\n# {{task_category}} - {{task_id}}\n\n## Context\nProject: {{project_name}}\nModule: {{module_name}}\nPriority: {{priority_level}}\n\n## Task\n{{task_description}}\n\n## Implementation Steps\n{{#each steps}}\n{{@index}}. {{this}}\n{{/each}}\n\n## Acceptance Criteria\n{{#each criteria}}\n- {{this}}\n{{/each}}\n```\n\nCreate optimized data `optimized_data.md`:\n\n```markdown\ntask_category=Bug Fix\ntask_id=BUG-2023-001\nproject_name=E-commerce Platform\nmodule_name=Payment Processing\npriority_level=High\ntask_description=Fix credit card validation error that occurs when using AMEX cards\nsteps_0=Reproduce the issue in development environment\nsteps_1=Identify the root cause in the validation logic\nsteps_2=Implement the fix\nsteps_3=Test with various card types\nsteps_4=Deploy to staging for QA verification\ncriteria_0=AMEX cards process successfully\ncriteria_1=Other card types still work\ncriteria_2=No regression in existing functionality\n```\n\nGenerate the prompt:\n\n```bash\n./mark generate optimized_template.md optimized_data.md\n```\n\n---\n\n## Ninja Level\n\n### AI Agent Integration\n\nAI agents can use `mark` to construct prompts dynamically. Here's a Python example:\n\n```python\nimport subprocess\nimport json\nimport os\n\ndef generate_contextual_prompt(template_file, context_data):\n    \"\"\"\n    Generate a contextual prompt using mark\n    \"\"\"\n    # Write context data to a temporary file\n    with open('temp_context.md', 'w') as f:\n        for key, value in context_data.items():\n            if isinstance(value, list):\n                # Handle arrays\n                for i, item in enumerate(value):\n                    f.write(f\"{key}_{i}={item}\\n\")\n            else:\n                f.write(f\"{key}={value}\\n\")\n    \n    # Generate prompt using mark\n    result = subprocess.run([\n        './mark', 'generate', \n        template_file, \n        'temp_context.md'\n    ], capture_output=True, text=True)\n    \n    # Clean up temporary file\n    os.remove('temp_context.md')\n    \n    if result.returncode == 0:\n        return result.stdout\n    else:\n        raise Exception(f\"mark error: {result.stderr}\")\n\n# Example usage\ncontext = {\n    \"task_domain\": \"Code Review\",\n    \"programming_language\": \"Python\",\n    \"experience_level\": \"Intermediate\",\n    \"focus_areas\": [\n        \"Performance optimization\",\n        \"Security vulnerabilities\",\n        \"Code readability\"\n    ],\n    \"task_description\": \"Review this Django application for best practices\"\n}\n\nprompt = generate_contextual_prompt('agent_template.md', context)\nprint(prompt)\n```\n\nCreate `agent_template.md`:\n\n```markdown\n# {{task_domain}} Assistant\n\nProgramming Language: {{programming_language}}\nExperience Level: {{experience_level}}\n\nFocus Areas:\n{{#each focus_areas}}\n- {{this}}\n{{/each}}\n\nTask: {{task_description}}\n\nPlease provide a comprehensive analysis addressing all focus areas.\n```\n\n### Dynamic Prompt Construction\n\nCreate a dynamic prompt construction system. Create `dynamic_agent_template.md`:\n\n```markdown\n# {{task_type}} AI Assistant\n\n{{#if user_profile.expertise}}\nExpertise: {{user_profile.expertise}}\n{{/if}}\n\n{{#if user_profile.experience}}\nExperience Level: {{user_profile.experience}}\n{{/if}}\n\nCurrent Context:\n{{#each context}}\n- {{this}}\n{{/each}}\n\nTask Objective: {{task_objective}}\n\n{{#if task_constraints}}\nConstraints:\n{{#each task_constraints}}\n- {{this}}\n{{/each}}\n{{/if}}\n\n{{#if examples_available}}\nExample Format:\n{{task_example}}\n{{/if}}\n\nInstructions:\n1. Analyze the task objective in the context of the provided information\n2. {{#if user_profile.expertise}}Apply your expertise in {{user_profile.expertise}} to{{else}}Carefully{{/if}} address all aspects of the task\n3. {{#if task_constraints}}Ensure all constraints are met{{/if}}\n4. {{#if examples_available}}Follow the example format provided{{/if}}\n5. Provide a comprehensive and well-structured response\n```\n\nCreate data file `dynamic_agent_data.md`:\n\n```markdown\ntask_type=Data Analysis\nuser_profile.expertise=Statistical Modeling\nuser_profile.experience=Advanced\ncontext_0=Dataset contains 10,000 customer records\ncontext_1=Data spans 5 years of customer behavior\ncontext_2=Objective is to identify purchasing patterns\ntask_objective=Analyze customer purchasing patterns and create a predictive model\ntask_constraints_0=Results must be interpretable by non-technical stakeholders\ntask_constraints_1=Model must be deployed in a production environment\nexamples_available=true\ntask_example=Customer segment A shows 30% higher purchase frequency in Q4\n```\n\nGenerate the prompt:\n\n```bash\n./mark generate dynamic_agent_template.md dynamic_agent_data.md\n```\n\n### Cross-Domain Knowledge Synthesis\n\nCreate templates that combine knowledge from multiple domains. Create `synthesis_template.md`:\n\n```markdown\n# Cross-Domain Solution Architect\n\n## Domains to Integrate\n{{#each domains}}\n- {{this.name}}: {{this.description}}\n{{/each}}\n\n## Challenge\n{{challenge_statement}}\n\n## Requirements for Solution\n{{#each requirements}}\n### {{@index}}. {{this.domain}} Perspective\n\n{{this.description}}\n{{/each}}\n\n## Constraints\n{{#each constraints}}\n- {{this}}\n{{/each}}\n\n## Expected Output Structure\n{{#each output_sections}}\n{{@index}}. {{this}}\n{{/each}}\n\nPlease synthesize knowledge from all domains to create an innovative solution that addresses all requirements while respecting all constraints.\n```\n\nCreate data file `synthesis_data.md`:\n\n```markdown\nchallenge_statement=Design a system that can predict equipment failures in manufacturing plants using environmental data\ndomains_0.name=Manufacturing Engineering\ndomains_0.description=Knowledge of industrial equipment and failure modes\ndomains_1.name=Environmental Science\ndomains_1.description=Understanding of environmental factors affecting equipment\ndomains_2.name=Machine Learning\ndomains_2.description=Predictive modeling techniques\ndomains_3.name=IoT Systems\ndomains_3.description=Sensor networks and data collection\nrequirements_0.domain=Manufacturing Engineering\nrequirements_0.description=Identify critical failure points and their typical precursors\nrequirements_1.domain=Environmental Science\nrequirements_1.description=Map environmental factors to equipment stress patterns\nrequirements_2.domain=Machine Learning\nrequirements_2.description=Design predictive models with high accuracy and low false positives\nrequirements_3.domain=IoT Systems\nrequirements_3.description=Specify sensor requirements and data collection frequencies\nconstraints_0=Budget limitations require cost-effective sensor solutions\nconstraints_1=System must work with existing plant infrastructure\nconstraints_2=Predictions must be delivered in real-time to plant operators\noutput_sections_0=Executive Summary\noutput_sections_1=Technical Architecture\noutput_sections_2=Environmental Factor Analysis\noutput_sections_3=Failure Mode Predictions\noutput_sections_4=Implementation Roadmap\noutput_sections_5=Cost-Benefit Analysis\n```\n\nGenerate the prompt:\n\n```bash\n./mark generate synthesis_template.md synthesis_data.md\n```\n\n### Self-Optimizing Prompts\n\nCreate a system where AI agents can refine their own prompts based on performance feedback. Create `self_optimizing_template.md`:\n\n```markdown\n# {{task_category}} {{task_id}} - Iteration {{iteration_number}}\n\n## Performance Feedback from Previous Iteration\n{{#if feedback.has_feedback}}\nScore: {{feedback.score}}/100\n{{#if feedback.strengths}}\nStrengths:\n{{#each feedback.strengths}}\n- {{this}}\n{{/each}}\n{{/if}}\n\n{{#if feedback.weaknesses}}\nAreas for Improvement:\n{{#each feedback.weaknesses}}\n- {{this}}\n{{/each}}\n{{/if}}\n\n{{#if feedback.suggestions}}\nSuggestions:\n{{#each feedback.suggestions}}\n- {{this}}\n{{/each}}\n{{/if}}\n{{else}}\nThis is the first iteration. No performance feedback available.\n{{/if}}\n\n## Task Definition\n{{task_description}}\n\n## Optimization Strategy\n{{#if feedback.has_feedback}}\nBased on the feedback, this iteration will focus on:\n{{#each optimization_focus}}\n- {{this}}\n{{/each}}\n{{else}}\nInitial approach:\n{{#each initial_approach}}\n- {{this}}\n{{/each}}\n{{/if}}\n\n## Constraints\n{{#each constraints}}\n- {{this}}\n{{/each}}\n\n## Evaluation Criteria\n{{#each evaluation_criteria}}\n- {{this}}\n{{/each}}\n\nPlease provide a solution that addresses the task while incorporating the optimization strategy.\n```\n\nCreate data file `self_optimizing_data.md`:\n\n```markdown\ntask_category=Code Generation\ntask_id=TG-2023-042\niteration_number=3\nfeedback.has_feedback=true\nfeedback.score=75\nfeedback.strengths_0=Correct implementation of core functionality\nfeedback.strengths_1=Good code structure and organization\nfeedback.weaknesses_0=Lack of error handling\nfeedback.weaknesses_1=Missing input validation\nfeedback.suggestions_0=Add comprehensive error handling\nfeedback.suggestions_1=Implement input validation for all user inputs\ntask_description=Create a Python function that converts temperature between Celsius, Fahrenheit, and Kelvin\noptimization_focus_0=Implement comprehensive error handling for invalid inputs\noptimization_focus_1=Add input validation for temperature values\noptimization_focus_2=Include unit tests for edge cases\nconstraints_0=Function must handle negative temperatures\nconstraints_1=Function must return appropriate error messages for invalid inputs\nevaluation_criteria_0=Correctness of temperature conversions\nevaluation_criteria_1=Robustness of error handling\nevaluation_criteria_2=Code quality and documentation\n```\n\nGenerate the prompt:\n\n```bash\n./mark generate self_optimizing_template.md self_optimizing_data.md\n```\n\n---\n\n## Conclusion\n\nYou've now completed the journey from beginner to ninja with `mark`! You've learned:\n\n1. **Beginner**: Basic template creation and variable substitution\n2. **Intermediate**: Conditional blocks, loop blocks, and file inclusion\n3. **Advanced**: Complex template structures and performance optimization\n4. **Ninja**: AI agent integration, dynamic prompt construction, and self-optimizing systems\n\nWith these skills, you can create powerful, dynamic prompt systems for AI agents and applications. The key is to start simple and gradually build complexity as needed.\n\nHappy templating!\n